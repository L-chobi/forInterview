## NoSQL(Not Only SQL) DB
- RDBMS(관계형 데이터베이스)가 아닌 일관성 모델(비관계형 모델)을 이용하는 데이터 저장을 말함.
- RDB의 한계를 극복하기 위한 데이터 저장소의 새로운 형태로 수평적 확장성을 가짐.
- RDBMS가 클라이언트/서버 환경에 맞는 데이터 저장기술이라면 NoSQL은 클라우드 환경에 맞는 저장기술이라고 함
- 대표적으로는 
: key-value DB (Riak, Redis, Voldmort)
: Document DB (MongoDB, CouchDB)
: BigTable DB (Hbase, Casandra)
: Graph DB (Sones, AllegroGraph)
- 등이 있음. 나는 문서형 DB인 몽고DB만 다뤄봄.
- 몽고DB는 JSON과 같은 동적 스키마 형태 사용에 따라 데이터 관계와 정해진 규격이 없음.

#### 장점
- RDBMS에 비해 저렴한 비용으로 분산처리와 병렬처리가 가능
- 비정형 데이터 구조 설계로 설계 비용이 감소
- 관계형 데이터베이스의 relation과 join 구조를 linking과 embedded로 구현하여 성능이 빠름
- 빅데이터 처리에 효과적. 많은 서버로 확장 가능
- 가변적인 구조로 데이터 저장이 가능
- json 구조로 RDBMS 테이블 구조에 비해 데이터를 직관적으로 파악

#### 단점
- 데이터 업데이트 중 장애가 발생하면 데이터 손실 발생 가능
- 많은 인덱스를 사용하려면 충분한 메모리가 필요. 인덱스 구조가 메모리에 저장
- 복잡한 join은 어려움
- 데이터 일관성이 항상 보장되지 않음
- RDBMS는 모든 서버를 update 되기 전까지는 해당 데이터 또는 테이블에 lock을 걸어 읽기 금지를 하여 데이터에 대한 일관성이 보장되지만 NoSQL에서는 lock을 하게될 경우 느려지므로 RDBMS처럼 lock을 하지 않음.

#### MongoDB의 Database
- DB는 컬렉션의 물리적 컨테이너를 의미. 하나의 DB에는 보통 여러 개의 컬렉션을 가짐.

#### document란?
- RDBMS로 치면 튜플(or 행)과 비슷한 개념.
- 도큐먼트는 하나의 키와 값의 집합으로 이루어져 있으며 동적 스키마임. 이는 동일한 컬렉션 내의 도큐먼트가 동일한 필드 또는 구조를 가질 필요가 없음을 의미함.
- 또한 동일한 필드안에 다른 타입의 데이터를 보유할 수도 있음.

#### collection이란?
- 컬렉션은 도큐먼트의 그룹. RDBMS의 테이블(Table)과 개념이 유사.
- 컬렉션은 단일 데이터베이스에 존재
- 스키마를 강요하지 않음. 그렇기에 내부의 도큐먼트는 서로 다른 필드를 가질 수 있음(일관성이 부족함)

## RDB
#### 데이터베이스(DB)란?
- 쉽게 말하면 데이터의 저장소 혹은 집합.
- DBMS는 이런 데이터베이스를 운영하고 관리하는 소프트웨어. 계층형, 망형, 관계형 등의 많은 DBMS가 있지만 대부분의 DBMS는 테이블로 구성된 관계형 DBMS 형태로 사용됨

#### PK, FK, ER모델
- PK는 Primary Key로 기본키라 불리며, 테이블에서 각 행을 유일하게 구분하는 키
- FK는 Foreign Key로 외래키라고 불리며, 하나의 테이블에 있는 컬럼만으로는 그 의미를 표현할 수 없는 경우, 다른 테이블의 기본키 값을 반드시 참조하여 표현해야하는 컬럼
- ER은 Entity Relation Model, 요구사항으로부터 얻어낸 정보들을 개체, 속성, 관계성으로 기술하는 데이터 모델
- 개체란 단독으로 존재하는 객체를 의미하며 동일한 객체는 존재하지 않음.
- 속성(attribute)는 개체가 갖는 속성을 의미(어떤 사람의 이름, 나이 등)
- 관계는 개체 타입간 관계를 의미. 

#### 참조 무결성?
- 기본키와 참조키 간의 관계가 항상 유지되는 것을 보장
- 참조되는 테이블의 행은 참조하는 참조키가 존재하는 이상 삭제되거나 기본키를 변경할 수 없음.
- 참조되는 테이블의 행이 삭제되면 참조하는 행도 삭제하는 cascade 조건 등이 있음.

#### RDBMS
- 모든 데이터를 2차원 테이블로 표현
- 테이블은 행과 열로 이루어진 기본 데이터 저장 단위
- 데이터베이스의 설계도를 ER 모델로 만들고, ER 모델에 따라 데이터베이스가 만들어지며 데이터베이스는 하나 이상의 테이블로 구성됨.

#### 트랜잭션(Transaction)
- DB의 상태를 변화시키기 위해 수행하는 작업의 단위를 의미.
- 변화시킨다는 것은 질의어(SELECT, INSERT 등)를 이용하여 데이터베이스에 접근하는 것을 의미.
- 작업단위는 질의어 한 문장이 아닌 그 이상의 질의어 명령문들을 사람이 정하는 기준에 따라 정함.

### ACID란?
- Atomicity: 트랜잭션의 결과가 DB에 모두 반영되거나, 반영되지 않아야 함.
- Consistency: 트랜잭션의 작업 처리 결과가 항상 일관성이 있어야 함.
- Isolation: 트랜잭션 수행 중에는 다른 트랜잭션의 영향을 받아서도, 주어서도 안됨.
- Durability: 트랜잭션 조작을 완료하면 그 결과는 영구적으로 반영되어야 함.

#### 커밋(commit), 롤백(rollback)?
- 커밋은 쿼리문에서 update, delete, insert를 수행했을 때 그 쿼리문 수행결과에 대해서 확정짓는 것.
- 롤백은 사용자가 update, delete, insert를 수행했을 때 잘못 사용한 경우 데이터를 복구시키기 위해 사용하는 것.

#### DML, DDL, DCL
- DML: DB에 들어있는 데이터를 조작, 조회, 검색하기 위한 명령어(SELECT, DELETE, UPDATE, INSERT)
- DDL: 테이블 구조를 정의하는데 사용되는 명령어(CREATE, ALTER, DROP, TRUNCATE)
- DCL: DB에 접근하거나 객체에 권한을 주는 등 역할을 하는 언어(COMMIT, ROLLBACK, GRANT, REVOKE)

#### 트리거
- DML이 수행되었을 때 DB에서 자동으로 동작하도록 작성된 프로그램

### 이상
#### 삽입 이상
- 데이터를 저장할 때 원하지 않는 정보가 함께 삽입되는 경우
#### 삭제 이상
- 튜플을 삭제함으로써 유지되어야 하는 정보까지도 연쇄적으로 삭제되는 경우
#### 갱신 이상
- 중복된 튜플 중 일부의 속성만 갱신시킴으로써 정보의 모순성이 발생하는 경우

### DB 정규화
- 자료의 손실이나 불필요한 정보의 도입 없이 데이터의 일관성, 데이터 중복을 최소화하고 최대의 데이터 안전성 확보를 위한 안정적 자료 구조로 변환하기 위해서 하나의 테이블을 둘 이상으로 분리하는 작업
- 목적은 자료 저장에 필요한 저장 공간을 최소화하고 자료의 삽입, 갱신 및 삭제에 따른 이상 현상을 제거하고, 자료 구조의 안정성 최대화하는 것

#### 함수적 종속
- 어떠한 테이블에서 속성들의 부분 집합을 X, Y 라 할 때 특정 튜플에서 X의 값이 Y의 값을 함수적으로 결정한다면 Y가 X에 함수적으로 종속 되었다고 함.

#### 제1차 정규형
- 각 행마다 컬럼의 값이 1개씩만 있어야함. 이를 원자값을 가진다고 함.
- 
#### 제2차 정규형
- 각 테이블의 모든 컬럼이 완전 함수적 종속을 만족하는 것. 기본키 중에 특정 컬럼에만 종속된 컬럼(부분적 종속)이 없어야 한다는 것을 의미.
- 어떤 테이블에 A, B, C라는 컬럼이 있고 이 중 기본키가 A, C이고 B는 A에게만 종속되어있다고 가정하자. 이 경우 부분적 종속이 있다고 하여 하나의 테이블을 A,B만을 가 진 테이블, A, C만을 가진 테이블로 분리함.

#### 제3차 정규형
- 이행적 함수 종속이 없어야 함. 기본키 이외의 다른 컬럼이 그 외 다른 컬럼을 결정할 수 없다는 것.

#### BCNF 
- 3차 정규형을 만족하면서 모든 결정자가 후보키 집합에 속한 정규형을 말함.
- 3차 정규형은 만족하지만 일반 컬럼이 후보키를 결정하는 경우 BCNF라 볼 수 없음.

#### 제4 정규형
- 다치 종속 제거

#### 제5 정규형
- 조인 종속성 제거

### INDEX
- 검색 속도를 높이기 위한 기술. 정렬된 상태를 유지하기 때문에 원하는 값을 탐색하는 데 빠름.
- DML을 수행하는 경우 쿼리문 실행 속도가 느려짐. 저장 성능을 희생하는 대신 읽기 속도를 높이는 기능.
- 보통 WHERE 절에서 사용되는 컬럼이 사용되기 좋으며 데이터 중복도가 높거나 DML이 자주 일어나는 컬럼의 경우는 피해야함. 

## SQL
#### SQL(Structured Query Language)이란?
- 구조화된 질의 언어라는 뜻으로 관계형 데이터베이스에서 사용되는 언어. 

#### PLSQL
- SQL이 확장된 개념으로 DML문과 Query문, 절차형 언어 등을 사용해서 절차적 프로그래밍을 가능하게 하는 트랜잭션 언어. 
- 블록구조로 수행속도를 높일 수 있음.


## RDBMS와 NoSQL의 차이점
- RDBMS의 경우 정해진 스키마에 따라 데이터를 저장해야 하므로 명확한 데이터 구조를 보장함. 이는 장점이기도 하지만 반대로 나중에 스키마가 변경될 경우 단점이 되기도 함. NoSQL은 이와 반대임. 스키마가 없기 때문에 유연하고 자유로운 데이터 구조를 가질 수 있지만 스키마가 존재하지 않기에 명확한 데이터 구조를 보장하지 않으며 데이터 구조 결정이 어려울 수 있음.
- RDBMS의 경우 각 데이터를 중복없이 한 번만 저장함(데이터 중복이 없음). NoSQL의 경우 데이터 중복이 발생할 수 있고 중복된 데이터가 변경될 경우 수정을 모든 컬렉션에서 수행해야 함.
